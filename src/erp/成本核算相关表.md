# 成本计算相关表

V_CB_CMPTCOSTQTYAMT.生产订单信息表 /  V_CB_CMPTCOSTQTYAMTENTRY  费用计算明细

| 表名                   | 用途               | 备注                            |
| ---------------------- | ------------------ | ------------------------------- |
| T_CB_COSTALLOCCRITERIA | 费用分配标准       | 不带语言                        |
| T_CB_QUOTAFACTORENTRY  | 定额因子明细       | FSTANDARDVALUE as 定额因子      |
| T_CB_PROORDERINFO      | 生产订单信息       | 附表                            |
|                        |                    | FPRODUCTID关联到定额因子明细    |
|                        |                    | FPRODUCTID 也是物料id           |
| T_CB_CostCalExpense    | 成本计算费用结果表 | 主表 通过FID到附表FID           |
| T_CB_PROORDERDIME      | 生产订单维度表     | 关联到物料                      |
| T_CB_QUOTAFACTORENTRY  | 定额因子明细       | FPRODUCTDIMEID与主表 ，关联物料 |





完工数量来自于T_CB_COSTCALEXPENSE_H主表 

```
costmain.FWASTEINQTY as  + costmain.FDYSINQTY + costmain.FQUALIFIEDINQTY AS fcurcomqty

本期废品入库-数量 + 本期不良入库-数量 +  本期合格入库-数量 = 完工数量
```

7月 5.05.01.0069 【FMATERIALID.物料代码 = 124431】

#### 生产订单+明细 



```sql
select * from T_PRD_MO  where FBILLNO='515-20230324014'

select * from T_PRD_MOENTRY where FMATERIALID = 124431  -- FID = 108500
```

生产订单信息表 ???

```sql
select * from T_CB_PROORDERINFO where FID = 108500

select * from V_CB_CMPTCOSTQTYAMT
where 

and year(a.FPERIODENDDATE) = #FYear#
and  month(a.FPERIODENDDATE)  = #FMonth#


```



### 生产入库单+明细

```sql
select * from T_PRD_INSTOCK where FBILLNO='SCRK00002201' --  120825  FMODIFIERID
select  FMUSTQTY,FREALQTY ,FMATERIALID from T_PRD_INSTOCKENTRY  
where FMATERIALID = 124431 --  FID = 102562
```

