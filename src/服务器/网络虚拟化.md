# 网络虚拟化



[参考](https://gitee.com/jack2nb/diskgit/blob/master/itx/itx_sys/openvs.md)



 ```
ovs-vsctl show
 ```

创建

```
ovs-vsctl add-br ovs1
ovs-vsctl set bridge ovs1 stp_enable=true
```

设置

```
ovs-vsctl set port vnet0 vlan_mode=trunk 
ovs-vsctl set port vnet0 trunk=17,18,16,15,22
```



查看结构和mac

```

ovs-ofctl show ovs1
ovs-vsctl list-ports ovs1
```

对接kvm

```
virsh net-define /etc/libvirt/qemu/networks/ovs1.xml
virsh net-start ovs1
virsh net-autostart ovs1
```



配置文件

```
<network>
  <name>ovs1</name>
  <uuid>38d78832-6c60-4fc3-932a-fedd9400cdf4</uuid>
  <forward mode='bridge'/>
  <bridge name='ovs1'/>
  <virtualport type='openvswitch'/>
</network>
```

















































