# appsmith平台

简单数据绑定和数据查询条件回传 ，ToolJet平台也不错Baserow作为后端



oa系统查询用户

## 数据绑定



### 查询请假

使用post方法访问

```url
http://192.168.20.199:2028/jsonapi/get?oa
```

### 无参数查询

```json
{
    "T_USER": {
        "@column": "ID,NAME,DEFAULTDEPARTMENT.部门id",
        "NAME": "张林",
        "@limit": 1
    }
}
```

### 绑定参数

```json
{
    "T_USER": {
        "@column": "ID,NAME,DEFAULTDEPARTMENT.部门id",
        "NAME": "{{inputName.property}}",
        "@limit": 1
    }
}
```

### 条件参数 

```json
{ 
    "TLK_APPLY_LEAVE": {

	"ITEM_LEAVE_T&": ">2023-07-01",
    "ITEM_LEAVE_R*":"{{  input_name.text  ? '%'+input_name.text  +'%': null}}",
    "@limit": {{  input_name.text  ? null: 10}},
	"@order": "-CREATED",
	"@column": "AUTHOR, ITEM_START_T.开始时间,ITEM_LEAVE_T.结束时间,ITEM_LEAVE_R.理由,   ITEM_TITLE.模块,ITEM_APPLICANT"
	}
}	
```



```json
{ "TLK_APPLY_LEAVE": {
        "AUTHOR|": "T_USER.ID",
        "ITEM_LEAVE_T&": ">2023-07-01",
        "@limit": 10
        "@order": "-CREATED",
        "@column": "AUTHOR, ITEM_START_T.开始时间,ITEM_LEAVE_T.结束时间,ITEM_LEAVE_R.理由,   ITEM_TITLE.模块,ITEM_APPLICANT"
    }
 }
```

### 全条件

```json
{
    "T_USER": {
        "@column": "ID,NAME,DEFAULTDEPARTMENT.部门id",
        "NAME": "张林",
        "@limit": 1
    },
    "T_DEPARTMENT": {
        "@column": "ID.部门id,NAME.部门",
        "ID|": "T_USER.部门id",
        "@limit": 1
    },
    "TLK_ATTENDANCEDETAIL": {
        "AUTHOR|": "T_USER.ID",
        "ITEM_ATTDATE&": ">2023-07-01",
        "@order": "-CREATED",
        "@column": "ITEM_ATTDATE, FORMNAME,AUTHOR"
    },
    "TLK_APPLY_LEAVE": {
        "AUTHOR|": "T_USER.ID",
        "ITEM_LEAVE_T&": ">2023-07-01",
        "@order": "-CREATED",
        "@column": "AUTHOR, ITEM_START_T.开始时间,ITEM_LEAVE_T.结束时间,ITEM_LEAVE_R.理由,   ITEM_TITLE.模块,ITEM_APPLICANT"
    },
    "TLK_BUSINESS_PUBLIC_TRIP": {
        "AUTHOR|": "T_USER.ID",
        "ITEM_TRAVEL_OT&": ">2023-07-01",
        "@order": "-CREATED",
        "@column": "AUTHOR,ITEM_TRAVEL_ST,ITEM_TRAVEL_OT,ITEM_TRAVEL_R.理由, ITEM_TRAVEL_CITY.公出城市, FORMNAME.模块,STATELABELINFO",
        "#url": "http://127.0.0.1:2022/jsonapi/get"
    }
}
```



### 条件绑定到表格

#### 返回结果数据

数据源.data.数据结构

```javascript
{{qingjia.data.TLK_APPLY_LEAVE}}
```

数据调试

```javascript
console.log(see_user.data?.T_USER?.[0])
```



### 内部数据

```
{{appsmith.user.name || appsmith.user.email}}
{{appsmith.store.xxx }}
```

支持的条件格式

### 组件数据

```
sex.selectedOptionValue
name.text
table.selectedRow.xxxx

```



 ## 常用函数

```javascript
showAlert('错误','error')
storeValue('login',{'a','b'})
navigateTo('主页')
showModal('xxx')
closeModal('curdMod')
```

#### 例子

```javascript
{{see_user.run(()=>{
	console.log(see_user.data?.T_USER?.[0])
if( see_user.data?.T_USER?.[0] ){
	storeValue('user', see_user.data?.T_USER?.[0] );
	navigateTo('主页')
}else{
	showAlert('用户或密码有误','error');
}
	
})}}
```

# 例子实践



## 增删改查

通过中台获取数据统一接口。

### 获取数据

```
http://192.168.20.199:2028/jsonapi/get
```



```json
{ 
    "k3c/V9_itDevInfo": {
    "@limit": {{  input_name?.text  ? null: 10}},
	}
}	
```

### 保存数据

```
http://192.168.20.199:2028/jsonapi/post
```

```
 {  "k3c/V9_itDevInfo":   
     {
     "tid": 1,
     "typeid": 1,
     "userId": "1",
     "deviceSn": "1",
     "location": "1",
     "note": 1
     }
 }   
```

### 更新数据

```
http://192.168.20.199:2028/jsonapi/put
```

